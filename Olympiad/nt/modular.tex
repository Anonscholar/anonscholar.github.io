\chapter{Basics of Modular Arithmetic}
\label{nt: modbasic}
\motiv{Modular arithmetic allows us to expand the notion of equality.}

\section{``Modulo''}

It is very hard to and rarely needed to establish equality in number theory. What may do instead
is the build on the notion of \emph{modular} arithmetic. Consider an analog clock, if it starts
at any arbritary time, then no matter how many rotations it goes through, whenever it points at 
\(1\), the time is \(1\) a.m or p.m. Thus even if we start counting hours, we may note that
\(13 = 1 = 25 = \dots\)                                                                                                                                                                                       
\parbreak
The equality symbol is not apt here. What should be much better used is the symbol of equivalence,
``\(\equiv\)''. Thus, what we mean is \(13 \equiv 1 \pmod{n}\). In general,

\begin{definition}
    [Congruent]
    \(a \equiv b \pmod{n}\) if and only if \(p \mid a - b\). In such a case \(a\) is said to be 
    congruent to \(b\) modulo \(n\).
\end{definition}

A neat little property of this is that \(a + n \equiv a \pmod{n}\). Also, we may note that
the values of \(b\) such that \(b \equiv a \pmod{n}\) form an A.P.

\begin{proof}
    \(b \equiv a \pmod{n} \iff n \mid b - a \iff b - a = nk\) where \(k\) is an integer. Thus,
    \(b = a + nk\), which is an A.P.
\end{proof}

\section{Remainder and Modulo}

Consider the set of values for which \(b \equiv 3 \pmod{5}\). They form the set, \(\left\{\dots
-7, -2, 3, 8, \dots \right\}\). It is difficult to work with such infinite sets which expand
in both directions, so let us concern ourselves only with non-negative elements, \(\left\{
3, 8, 13, 18 \dots \right\}\). 

Through this example, we may see a neat pattern,

\begin{lemma}
    The lowest non-negative value of \(a\) such that \(a \equiv b \pmod{n}\) is the remainder \(r\)
    such that \(b = nk + r\), \(0 \le r < n\). 
\end{lemma}

\section{Residue class}

Consider a number \(3\). If we concern ourselves only with the remainder such that \(a \equiv r \pmod{n}\),
you may note that \(r\) can only have three values here, \(0\), \(1\), and \(2\). Thus, either
\(a \equiv 0\), \(a \equiv 1\) or \(a \equiv 2 \pmod{n}\). This is always true. These \(3\) sets
that \(a\) can belong to, are called the \(3\) residue classes modulo \(3\).

In general,

\begin{definition}
    For any natural number \(n\), \(r\) such that \(0 < r < n\), the \(r^{th}\) residue class is
    the set of all integers \(a\) such that \(a \equiv r \pmod{n}\). This set is,
    \[
        \left\{\dots, r - 2n, r - n, r, r + n, r + 2n, \dots\right\}
    \]
\end{definition}

There are exactly \(n\) residue classes modulo \(n\) since \(r\) can take \(n\) values, from \(0\)
to \(n - 1\).

\section{Arithmetic over modulo}

Consider \(a + b \pmod{n}\) for \(a \equiv r \pmod{n}\) and \(b = m \pmod{n}\). Does \(a + b \equiv r + m
\pmod{n}\)? Yes. The idea behind the proof is to just have \(a = nk + r\) and \(b = nd + m\). 

\begin{proposition}
    From the definition and the previous discussion of modular arithmetic, we have,
    \begin{enumerate}
        \ii For \(a \equiv r\), \(b \equiv m \pmod{n}\), \(a + b \equiv r + m \pmod{n}\)
        \ii \(a \equiv r\), \(b \equiv m \pmod{n} \implies\) \(ab \equiv rm \pmod{n}\)
        \ii For \(a \equiv b \pmod{n}\), \(a + c \equiv b + c \pmod{n}\)
        \ii For \(a \equiv b \pmod{n}\), \(ac \equiv bc \pmod{n}\)
        \ii For \(a \equiv b \pmod{n}\), \(a^c \equiv b^c \pmod{n}\)
    \end{enumerate}
\end{proposition}

\section{Fermat's Little Theorem}

Consider the set \(\SC = \Set{0, a, 2a, \dots, (p-1)a}\) where \(p\)
is a prime and \(a\) is co-prime to \(p\). You may note
that each of its element has a different remainder modulo \(p\). That is,
each element belongs to a different residue class. Let us prove this.

\begin{proof}
    Let \(ai, aj \in \SC\) such that \(i \neq j\). Note that 
    \(0 \le i \ne j < p\). 
    If each element does not belong to a different residue class, then 
    \(ai \equiv aj \pmod{p}\). Thus, 
    \[p \mid a(i-j)\]
    Clearly, \(p \nmid a\). Therefore, we must have \(p \mid i-j \implies 
    \abs*{i-j} \ge p\). However this contradicts the fact 
    that \(i, j < p \implies \abs*{i-j} < p\)!
\end{proof}

A very interesting thing about this set is that it has \(p\) elements.
Since each has a different residue class, the elements cover 
\(p\) residue classes modulo \(p\). They cover all the classes there are.
Which leads us to conclude that modulo \(p\), the set \(\SC\) is simply 
the set of all the residue classes.

\begin{lemma}
    Let \(\SC = \Set{1, 2, \dots, (p-1)}\) where \(p\) is 
    a prime. Let \(a\) be an integer such that \(\gcd(a, p) = 1\). Then,
    \[ a\SC \equiv \SC \pmod{p} \]
\end{lemma}

A very useful way to use that two sets are equal is to either 
multiply their elements, add them together, add their squares, etc.
because these don't depend on the order of elements.

Consider the above sets. Let us multiply their elements together,
\[a \cdot 2a \cdot \dots (p-1)a \equiv 1 \cdot 2 \cdot \dots \cdot (p-1) \pmod{p}\]

Which gives, 
\[a^{p-1}(p-1)! \equiv (p-1)! \pmod{p}\]
Now, note that \(\gcd((p-1)!, p) = 1\) so we can divide by it.

This finally results in a very interesting theorem. 

\begin{theorem}[Fermat's Little Theorem]
    \label{theorem: fermatlittle}
    If \(a\) is an integer co-prime to a prime \(p\), 
    \[a^{(p-1)} \equiv 1 \pmod{p}\]
\end{theorem}

A more general form of this is, 

\begin{theorem}[Fermat's Little Theorem]
    \label{theorem: fermatlittle2}
    If \(a\) is an integer and \(p\) is a prime, 
    \[a^{p} \equiv a \pmod{p}\]
\end{theorem}

Here we do not require \(a\) to be co-prime because if \(p \mid a\), then
simply \(a^p \equiv 0 \equiv a \pmod{p}\). The other case
follows easily from \cref{theorem: fermatlittle}.

\section{Inverse}

Note that modulo \(p\), we can always find a \(0 < x < p\) such that 
\(ax \equiv 1 \pmod{p}\) for a co-prime \(a\). Such 
an \(x\) is called the \vocab{inverse} of \(a\) and is denoted \(a^{-1}\) or \(\dfrac{1}{a}\).

Some particular properties of the inverse is that it behaves like fractions.
These properties are not obvious from the definition of inverses but are rather easy to prove.

One particular thing to remember when solving some of these inverses is that
we can simply a lot of stuff, particularly,

\[\frac{a}{b} = \frac{a \mod{p}}{b \mod{p}}\] which simplifies the expression a lot.
We can then find the inverse of \(b \pmod{p}\) by well sheer guessing.

We can't always find inverse modulo a composite number. So don't be fooled into believing or stating
such a thing.

Also, for primes, it is easy to see that from \cref{theorem: fermatlittle}, \(a^{p-2} \equiv a^{-1} \pmod{p}\).
At last, clearly, \(a \equiv b^{-1} \iff b \equiv a^{-1} \pmod{p}\). 

\section{Wilson's Theorem}

Consider the set of non-zero residues of \(p\), \(\SC = \Set{1, 2, \dots, p-1}\).
Here, we can form pairs of \((a,b)\) such that \(a \cdot b \equiv 1 \pmod{p}\), 
basically pairs of inverses.

Note that for \(a \equiv \pm 1 \pmod{p}\), its inverse is itself.
For \(\SC\) the only elements that fulfill this are \(1\) and \(p-1\).
Leaving this, if we multiply the rest of the elements together, 

\[2 \cdot 3 \cdot \dots \cdot p-2\]

We can pair these up as inverses,

\[2 \cdot 2^{-1} \cdot \dots (p-2)^{-1} \cdot (p-2)\]

And now consider them modulo \(p\),

\[2 \cdot 2^{-1} \cdot \dots (p-2)^{-1} \cdot (p-2) \equiv 1 \cdot 1 \cdot \dots \cdot 1 \pmod{p}\]

Finally multiplying by \(p-1\), we get that,

\[(p-1)! \equiv p-1 \equiv -1 \pmod{p}\]

This is a very neat theorem. Infact, it is possible to show from this that
any number that fulfills this criterion is infact a prime.

\begin{theorem}
    \label{thm: wilson}
    An integer \(n\) satisfies 
    \[(n-1)! = -1 \pmod{n}\]
    if and only if \(n\) is prime.
\end{theorem}

\section{General Equal Sets}

Previously we showed that \(a\SC \equiv \SC \pmod{p}\). Note that we use two things 
in the proof, that \(\gcd(a, p) = 1\) and that every element in \(\SC\) itself was co-prime 
to \(p\). 

Let us extend this to any integer, \(n\). Note that if we take the set \(\SC\) to be the 
set of integers relatively prime to \(n\), we see that the set \(a\SC \equiv \SC \pmod{n}\).

This is because we can see that if \(ai \equiv aj \pmod{n}\) where \(i, j \in \SC\), 
since \(\gcd(a, p) = \gcd(i, p) = \gcd(j, p) = 1\), we must have \(i = j\) much like our previous 
proof. 

\begin{theorem} 
    Let \(n\) be any integer. Let \(\SC\) be the set of integers less
    than \(n\) and relatively prime to \(n\). Let \(a\) be any integer coprime to \(n\). Then,

    \begin{equation}
        a\SC \equiv \SC \pmod{n}
    \end{equation}

\end{theorem}

Also, 

\begin{definition}
    The set \(\SC\) is called a \vocab{reduced residue system} modulo \(n\).
\end{definition}

\section{Euler's Theorem}

If we again, multiply the elements of the set \(a\SC\) and \(\SC\), and represent the cardinality of \(\SC\) as \(n(\SC)\),

\begin{equation*}
    a^{n(\SC)} \prod_{\begin{subarray}{c} 1 \le i < n \\ \gcd(i, n) = 1 \end{subarray}}i \equiv \prod_{\begin{subarray}{c} 1 \le i < n \\ \gcd(i, n) = 1 \end{subarray}}i \pmod{n}
\end{equation*}

We can then cancel out the products because they're co-prime to \(p\), 

\begin{equation*}
    a^{n(s)} \equiv 1 \pmod{n}
\end{equation*}

Now we need to calculate \(n(\SC)\), the no. of integers relatively co-prime to \(n\).
A function to calculate this was discovered by Euler, and is called \vocab{Euler's Totient Function}.

\begin{definition}
    Let \(n\) be a positive integer. The function \(\varphi(n)\) is called Euler's totient
    function, and it denotes the number of positive integers less than \(n\) that are co-prime to it.
\end{definition}

A way to calculate this is, 

\begin{theorem}[Euler's Totient Function]
    Let \(n = p_1^{\alpha_1}p_2^{\alpha_2}\dots p_k^{\alpha_k}\), then,

    \begin{equation}
        \varphi(n) = n\qty(1 - \frac{1}{p_1})\qty(1 - \frac{1}{p_2})\cdots\qty(1 - \frac{1}{p_k})
    \end{equation} 
\end{theorem}

Another way or writing them is, 

\begin{equation}
    \varphi(n) = (p_1^{\alpha_1 - 1})(p_1-1) \cdot (p_2^{\alpha - 1})(p_2 - 1) \cdots (p_k^{\alpha_k - 1})(p_k - 1)
\end{equation}

This is derived from the fact that \(\varphi\) is a \vocab{multiplicative function}, i.e, for any 
\emph{co-prime} integers \(m\), \(n\),

\begin{equation}
    \varphi(mn) = \varphi(m)\varphi(n)
\end{equation}

This finally gives us Euler's theorem, 

\begin{theorem}[Euler's Theorem]
    For any integer \(n \ge 2\), and an integer \(a\) co-prime to \(n\), 
    \begin{equation}
        a^{\varphi(n)} \equiv 1 \pmod{n}
    \end{equation}
\end{theorem}

\section{General Inverses}

We see that \(1 \in \SC\) for all integers \(n\). Thus, 
since \(a\SC = \SC \pmod{n}\), there must exist a \(x\) such that, 

\begin{equation*}
    ax \equiv 1 \pmod{n}
\end{equation*}

if \(\gcd(a, n) = 1\).