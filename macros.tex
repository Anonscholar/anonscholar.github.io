%Modified from Evan's evan.sty.
%
%Boost Software License - Version 1.0 - August 17th, 2003
%
%Permission is hereby granted, free of charge, to any person or organization
%obtaining a copy of the software and accompanying documentation covered by
%this license (the "Software") to use, reproduce, display, distribute,
%execute, and transmit the Software, and to prepare derivative works of the
%Software, and to permit third-parties to whom the Software is furnished to
%do so, all subject to the following:

%The copyright notices in the Software and this entire statement, including
%the above license grant, this restriction and the following disclaimer,
%must be included in all copies of the Software, in whole or in part, and
%all derivative works of the Software, unless such copies or derivative
%works are solely in the form of machine-executable object code generated by
%a source language processor.

%THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
%IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
%FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT
%SHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE
%FOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE,
%ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
%DEALINGS IN THE SOFTWARE.

\usepackage{xargs}
\usepackage{centernot}
\usepackage{mathtools}
\usepackage{tikz-cd}

\newcommand{\increment}{\Delta}
\newcommand{\vect}[1]{\boldsymbol{\mathbf{#1}}}
\newcommand{\unitv}[1]{{\hat{\vect{#1}}}}

\newcommand{\avg}[1]{\overline{#1}}
\newcommand{\notiff}{%
  \mathrel{{\ooalign{\hidewidth$\not\phantom{"}$\hidewidth\cr$\iff$}}}}
  
\newcommand{\listvec}[2]{\left(#1_{1}, #1_{2}, \dots, #1_{#2}\right)}
\newcommand{\many}[2]{#1_{1}#1_{2}\cdots#1_{#2}}
\newcommand{\manys}[2]{\{#1_{1},#1_{2}\ldots,#1_{#2}\}}
\newcommand{\cbrt}[1]{\sqrt[3]{#1}}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\ceiling}[1]{\left\lceil #1 \right\rceil}
\newcommand{\mailto}[1]{\href{mailto:#1}{\texttt{#1}}}
\newcommand{\ol}{\overline}
\newcommand{\ul}{\underline}
\newcommand{\wt}{\widetilde}
\newcommand{\wh}{\widehat}
\newcommand{\eps}{\varepsilon}
\newcommand{\vocab}[1]{\textbf{\color{blue}\sffamily #1}}
\providecommand{\alert}{\vocab}
\providecommand{\half}{\frac{1}{2}}
\newcommand{\catname}{\mathsf}
\newcommand{\hrulebar}{
    \par\hspace{\fill}\rule{0.95\linewidth}{.7pt}\hspace{\fill}
    \par\nointerlineskip \vspace{\baselineskip}
}
\providecommand{\arc}[1]{\wideparen{#1}}

%For use in author command
\newcommand{\plusemail}[1]{\\ \normalfont \texttt{\mailto{#1}}}

%More commands and math operators
\DeclareMathOperator{\cis}{cis}
\DeclareMathOperator*{\lcm}{lcm}
\DeclareMathOperator*{\argmin}{arg min}
\DeclareMathOperator*{\argmax}{arg max}

%Convenient Environments
\newenvironment{soln}{\begin{proof}[Solution]}{\end{proof}}
\newenvironment{parlist}{\begin{inparaenum}[(i)]}{\end{inparaenum}}
\newenvironment{gobble}{\setbox\z@\vbox\bgroup}{\egroup}

%Inequalities
\newcommand{\cycsum}{\sum_{\mathrm{cyc}}}
\newcommand{\symsum}{\sum_{\mathrm{sym}}}
\newcommand{\cycprod}{\prod_{\mathrm{cyc}}}
\newcommand{\symprod}{\prod_{\mathrm{sym}}}

%From H113 "Introduction to Abstract Algebra" at UC Berkeley
\newcommand{\CC}{\mathbb C}
\newcommand{\FF}{\mathbb F}
\newcommand{\NN}{\mathbb N}
\newcommand{\NNO}{\mathbb N_{\ge 0}}
\newcommand{\ZZO}{\mathbb Z_{\ge 0}}
\newcommand{\QQ}{\mathbb Q}
\newcommand{\RR}{\mathbb R}
\newcommand{\ZZ}{\mathbb Z}

\newcommand{\charin}{\text{ char }}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Inn}{Inn}
\DeclareMathOperator{\Syl}{Syl}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\GL}{GL} % General linear group
\DeclareMathOperator{\SL}{SL} % Special linear group
\DeclareMathOperator{\Vol}{Vol} % Special linear group

%From Kiran Kedlaya's "Geometry Unbound"
\newcommand{\dang}{\measuredangle} %% Directed angle
\newcommand{\ray}[1]{\overrightarrow{#1}}
\newcommand{\seg}[1]{\overline{#1}}

\newcommand{\comp}[1]{\widebar{#1}}
\newcommand{\ndiv}[1]{\dot{#1}}
\newcommand{\nddiv}[1]{\ddot{#1}}

%From M275 "Topology" at SJSU
\DeclareMathOperator{\id}{id}
\newcommand{\taking}[1]{\xrightarrow{#1}}
\newcommand{\inv}{^{-1}}

%From M170 "Introduction to Graph Theory" at SJSU
\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\ord}{ord}
\newcommand{\defeq}{\overset{\mathrm{def}}{=}}

%From the USAMO .tex files
\newcommand{\ts}{\textsuperscript}
\newcommand{\dg}{^\circ}
\newcommand{\ii}{\item}

% From Math 55 and Math 145 at Harvard
\newenvironment{subproof}[1][Proof]{%
    \begin{proof}[#1] \renewcommand{\qedsymbol}{$\blacksquare$}}%
    {\end{proof}}

\newcommand{\liff}{\leftrightarrow}
\newcommand{\lthen}{\rightarrow}

\DeclareMathOperator{\Img}{Im} % Image
\DeclareMathOperator{\coker}{coker} % Cokernel
\DeclareMathOperator{\Coker}{Coker} % Cokernel
\DeclareMathOperator{\Ker}{Ker} % Kernel
\DeclareMathOperator{\Spec}{Spec} % spectrum
\DeclareMathOperator{\pr}{pr} % projection
\DeclareMathOperator{\ext}{ext} % extension
\DeclareMathOperator{\pred}{pred} % predecessor
\DeclareMathOperator{\dom}{dom} % domain
\DeclareMathOperator{\ran}{ran} % range
\DeclareMathOperator{\Hom}{Hom} % homomorphism
\DeclareMathOperator{\Mor}{Mor} % morphisms
\DeclareMathOperator{\End}{End} % endomorphism

% Things Lie
\newcommand{\kb}{\mathfrak b}
\newcommand{\kg}{\mathfrak g}
\newcommand{\kh}{\mathfrak h}
\newcommand{\kn}{\mathfrak n}
\newcommand{\ku}{\mathfrak u}
\newcommand{\kz}{\mathfrak z}
\DeclareMathOperator{\Ext}{Ext} % Ext functor
\DeclareMathOperator{\Tor}{Tor} % Tor functor
\newcommand{\SCF}{\mathscr F}
\newcommand{\SCG}{\mathscr G}
\newcommand{\SCH}{\mathscr H}

% Mathfrak primes
\newcommand{\km}{\mathfrak m}
\newcommand{\kp}{\mathfrak p}
\newcommand{\kq}{\mathfrak q}


%aliases
\renewcommand{\ge}{\geqslant}
\renewcommand{\le}{\leqslant}
\renewcommand{\subset}{\subsetneq}
\newcommand{\auth}[1]{\emph{#1}}
\newcommand{\para}[1]{#1 \par}
\newcommand{\lpara}[1]{\par}
\newcommand{\parbreak}{\smallskip}

%some stuff
\newcommand{\pointspades}[1]{[{\color{red}#1}\spadesuit]}



%geo
\newcommand{\rantri}{\tkzDefPoints{0/1/A,4/3/B,5/1/C}%
\tkzDrawPolygon(A,B,C)}
\newcommand{\coor}[2]{\tkzDefPoint(#1){#2}}
\newcommand{\Triangle}[1]{\tkzDrawPolygon(#1)}
\newcommand{\polygon}[1]{\tkzDrawPolygon(#1)}



\newcommand{\Line}[1]{\tkzDrawSegment(#1)}

\newcommand{\equi}[1]{\tkzDefTriangle[equilateral](#1)}
\newcommand{\twoang}[2]{\tkzDefTriangle[two angles = #1](#2)}
\newcommand{\isoright}[1]{\tkzDefTriangle[isosceles right](#1)}
\newcommand{\getp}[1]{\tkzGetPoint{#1}}

\newcommand{\centroid}[2]{\tkzDefTriangleCenter[centroid](#1)
\tkzGetPoint{G}\tkzDrawPoints(G)\tkzLabelPoints[#2](G)}

\newcommand{\incentre}[2]{\tkzDefCircle[in](#1) \tkzGetPoints{I}{a}
\tkzDrawPoints(I)\tkzLabelPoints[#2](I)}

\newcommand{\incircle}[1]{\tkzDefCircle[in](#1) \tkzGetPoints{I}{a}
\tkzDrawCircle(I,a)}

\newcommand{\circumcentre}[2]{\tkzDefCircle[circum](#1) 
\tkzGetPoint{O}\tkzDrawPoints(I)\tkzLabelPoints[#2](I)}

\newcommand{\circumcircle}[2]{\tkzDefCircle[circum](#1) \tkzGetPoint{O}
\tkzDrawCircle(O,#2)}

\newcommand{\orthocentre}[2]{\tkzDefTriangleCenter[ortho](#1)
\tkzGetPoint{H}\tkzDrawPoints(H)\tkzLabelPoints[#2](H)}

\newcommand{\orthopoints}[3]{\tkzDefSpcTriangle[orthic](#1,#2,#3){H_#1,H_#2,H_#3}}
\newcommand{\ortho}[3]{\tkzDefSpcTriangle[orthic](#1,#2,#3){H_#1,H_#2,H_#3}
\tkzDrawSegments(#1,H_#1 #2,H_#2 #3,H_#3)
\tkzMarkRightAngles[fill=gray!20,
opacity=.5](#1,H_#1,#3 #2,H_#2,#1 #3,H_#3,#1)}

\newcommand{\rightang}[1]{\tkzMarkRightAngles[fill=gray!20,
opacity=.5](#1)}

\newcommand{\drawsquare}[1]{\tkzDefSquare(#1)
\tkzDrawPolygon(#1,tkzFirstPointResult,%
tkzSecondPointResult)}

\newcommand{\angname}[2]{\tkzLabelAngle[pos=1](#2){$#1$}}
\newcommand{\foot}[3]{\tkzDefLine[perpendicular=through #1,K=-.5](#2,#3)\tkzGetPoint{c}
\tkzDefPointBy[projection=onto #2--#3](c)\tkzGetPoint{h}}

\newcommand{\project}[3]{\tkzDefPointBy[projection=onto #2](#1) \tkzGetPoint{#3}}

\newcommandx{\empangle}[4][1=0.5,2=black,3=|]{\tkzMarkAngle[size=#1,color=#2,mark=#3](#4)}
\newcommandx{\vertice}[2][1=left]{\tkzDrawPoints(#2)\tkzLabelPoints[#1](#2)}

\newcommandx{\fillangle}[3][1=orange]{\tkzDrawSector[R with nodes,fill=#1!20](#2,0.25)(#3)}

\newcommand*\len[1]{\overline{#1}}

%framed
\mdfdefinestyle{MyFrame}{%
    linecolor=black,
    outerlinewidth=0.05pt,
    %roundcorner=20pt,
    %backgroundcolor=gray!50!white}
        }

\newcommand\header[1]{
  \newlength{\headerwidth}
  \setlength{\headerwidth}{\widthof{#1}}
  \addtolength{\headerwidth}{8pt}
  \begin{mdframed}[style=MyFrame,userdefinedwidth=\headerwidth]
    #1
  \end{mdframed}
}

\makeatletter
\let\save@mathaccent\mathaccent
\newcommand*\if@single[3]{%
  \setbox0\hbox{${\mathaccent"0362{#1}}^H$}%
  \setbox2\hbox{${\mathaccent"0362{\kern0pt#1}}^H$}%
  \ifdim\ht0=\ht2 #3\else #2\fi
  }
%The bar will be moved to the right by a half of \macc@kerna, which is computed by amsmath:
\newcommand*\rel@kern[1]{\kern#1\dimexpr\macc@kerna}
%If there's a superscript following the bar, then no negative kern may follow the bar;
%an additional {} makes sure that the superscript is high enough in this case:
\newcommand*\widebar[1]{\@ifnextchar^{{\wide@bar{#1}{0}}}{\wide@bar{#1}{1}}}
%Use a separate algorithm for single symbols:
\newcommand*\wide@bar[2]{\if@single{#1}{\wide@bar@{#1}{#2}{1}}{\wide@bar@{#1}{#2}{2}}}
\newcommand*\wide@bar@[3]{%
  \begingroup
  \def\mathaccent##1##2{%
%Enable nesting of accents:
    \let\mathaccent\save@mathaccent
%If there's more than a single symbol, use the first character instead (see below):
    \if#32 \let\macc@nucleus\first@char \fi
%Determine the italic correction:
    \setbox\z@\hbox{$\macc@style{\macc@nucleus}_{}$}%
    \setbox\tw@\hbox{$\macc@style{\macc@nucleus}{}_{}$}%
    \dimen@\wd\tw@
    \advance\dimen@-\wd\z@
%Now \dimen@ is the italic correction of the symbol.
    \divide\dimen@ 3
    \@tempdima\wd\tw@
    \advance\@tempdima-\scriptspace
%Now \@tempdima is the width of the symbol.
    \divide\@tempdima 10
    \advance\dimen@-\@tempdima
%Now \dimen@ = (italic correction / 3) - (Breite / 10)
    \ifdim\dimen@>\z@ \dimen@0pt\fi
%The bar will be shortened in the case \dimen@<0 !
    \rel@kern{0.6}\kern-\dimen@
    \if#31
      \overline{\rel@kern{-0.6}\kern\dimen@\macc@nucleus\rel@kern{0.4}\kern\dimen@}%
      \advance\dimen@0.4\dimexpr\macc@kerna
%Place the combined final kern (-\dimen@) if it is >0 or if a superscript follows:
      \let\final@kern#2%
      \ifdim\dimen@<\z@ \let\final@kern1\fi
      \if\final@kern1 \kern-\dimen@\fi
    \else
      \overline{\rel@kern{-0.6}\kern\dimen@#1}%
    \fi
  }%
  \macc@depth\@ne
  \let\math@bgroup\@empty \let\math@egroup\macc@set@skewchar
  \mathsurround\z@ \frozen@everymath{\mathgroup\macc@group\relax}%
  \macc@set@skewchar\relax
  \let\mathaccentV\macc@nested@a
%The following initialises \macc@kerna and calls \mathaccent:
  \if#31
    \macc@nested@a\relax111{#1}%
  \else
%If the argument consists of more than one symbol, and if the first token is
%a letter, use that letter for the computations:
    \def\gobble@till@marker##1\endmarker{}%
    \futurelet\first@char\gobble@till@marker#1\endmarker
    \ifcat\noexpand\first@char A\else
      \def\first@char{}%
    \fi
    \macc@nested@a\relax111{\first@char}%
  \fi
  \endgroup
}
\makeatother




\newcommand{\irrev}[1]{%
    \Ifthispageodd{%
    \reversemarginpar\marginpar{\RaggedLeft\large \bfseries \color{purple}Extra}\normalmarginpar}{%
    \marginpar{\RaggedLeft\large\bfseries \color{purple}Extra}}%
    }


\usepackage{scrextend}

\definecolor{boldcolor}{gray}{0.18} % range from [0,1]
\newcommand{\lightbold}[1]{\textcolor{boldcolor}{#1}}

\newcommand{\marginnote}[1]{%
    \Ifthispageodd{%
        \marginpar{\begin{marginnotebox}\sffamily\RaggedRight\lightbold{#1}\end{marginnotebox}}}{%
        \marginpar{\begin{marginnotebox}\sffamily\RaggedRight\lightbold{#1}\end{marginnotebox}}}%
    }


\newcommand{\marginref}[1]{%
    \Ifthispageodd{%
        \marginpar{\begin{marginrefbox}\sffamily\RaggedRight#1\end{marginrefbox}}}{%
        \marginpar{\begin{marginrefbox}\sffamily\RaggedRight#1\end{marginrefbox}}}%
    }


    \usepackage{palatino}
    \usepackage{enumitem}
    \usepackage{fontawesome}
    \usepackage{multicol}
    

\newcommand{\cautionmark}{\scshape{\color{black}\faWarning}}
\newlist{Caution}{enumerate}{1}
\setlist[Caution]{label=\raisebox{-0.5cm}[0pt][0pt]{\cautionmark},leftmargin=1cm}

\newcommand{\alignedmarginpar}[1]{%
    \Ifthispageodd{%
        \marginpar{\RaggedRight#1}}{%
        \marginpar{\RaggedLeft#1}}%
    }


\newcommand{\caution}[1]{  
  \alignedmarginpar{\bigskip \cautionmark}
  
  \begin{mdframed}[linecolor=red!70!black]%
      \bfseries\color{red!50!black}%
      #1
    \end{mdframed}
}

%From Knzhou

\newcommand{\union}{\cup}
\newcommand{\intersect}{\cap}
\newcommand{\subgr}{\subseteq}
\newcommand{\subr}{\subseteq}
\newcommand{\nsubgr}{\trianglelefteq} % normal subgroup
\newcommand{\dunion}{\sqcup}
\newcommand{\incl}{\iota}
\renewcommand{\mod}{\, \mathrm{mod}\, } % modular arithmetic
\newcommand{\sdprod}{\rtimes} % semidirect product

\def\rcurs{{\mbox{$\resizebox{.09in}{.08in}{\includegraphics[trim= 1em 0 14em 0,clip]{../script_r/ScriptR.pdf}}$}}}
\def\brcurs{{\mbox{$\resizebox{.09in}{.08in}{\includegraphics[trim= 1em 0 14em 0,clip]{../script_r/BoldR.pdf}}$}}}
\def\hrcurs{{\mbox{$\hat \brcurs$}}}

\newcommand*\widefbox[1]{\fbox{\hspace{2em}#1\hspace{2em}}}

\renewcommand*{\Re}{\mathfrak{R}}
\renewcommand*{\Im}{\mathfrak{I}}

\newcommand{\spart}[1]{\newgeometry{left=2cm,right=2cm} \part{#1} \parttoc \restoregeometry} 
