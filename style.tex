\usepackage{amsmath, amsthm, amssymb}

\usepackage[right=3.5cm,left=1.5cm,bottom=1in,top=1in,portrait,marginparwidth=78pt]{geometry}
\usepackage[texindy]{imakeidx}
\makeindex[intoc]
\usepackage[dvipsnames]{xcolor}

\usepackage[]{minitoc}
\doparttoc[n]
\noptcrule
\renewcommand\beforeparttoc{{\bfseries \Large Part \thepart: Contents}\vspace{1em}\hrule}
\usepackage{etoolbox}

%Chapter Style
\usepackage{calc,color}
\newif\ifNoChapNumber
\newcommand\Vlines{%
\def\VL{\rule[-1cm]{1pt}{2.5cm}\hspace{1mm}\relax}
\VL\VL\VL\VL\VL\VL\VL}
\makeatletter
\setlength\midchapskip{0pt}
\makechapterstyle{VZ43}{
\renewcommand\chapternamenum{}
\renewcommand\printchaptername{}
\renewcommand\printchapternum{}
\renewcommand\chapnumfont{\Huge\bfseries\centering}
\renewcommand\chaptitlefont{\Huge\bfseries\raggedright}
\renewcommand\printchaptertitle[1]{%
\Vlines\hspace*{-2em}%
\begin{tabular}{@{}p{1cm} p{\textwidth-3cm}}%
\ifNoChapNumber\relax\else%
\colorbox{black}{\color{white}%
\makebox[.8cm]{\chapnumfont\strut \thechapter}}
\fi
& \chaptitlefont ##1
\end{tabular}
\NoChapNumberfalse
}
\renewcommand\printchapternonum{\NoChapNumbertrue}
}
\makeatother
\chapterstyle{ger}
% ===== FRONT MATTER CHAPTER STYLE
\makechapterstyle{frontmatter}{% Front matter chapter style
  \chapterstyle{ger}% Or whatever you consider to be default
}
% ===== MAIN MATTER CHAPTER STYLE
\makechapterstyle{mainmatter}{% Main matter chapter style
  \chapterstyle{VZ43}% Or whatever you consider to be default
}
% ===== BACK MATTER CHAPTER STYLE
\makechapterstyle{backmatter}{% Back matter chapter style
  \chapterstyle{frontmatter}% Backmatter chapterstyle is similar to frontmatter
}

\makeatletter
\renewcommand{\partnumberline}[1]{Part \bfseries#1:~}
\renewcommand*{\l@part}[2]{%
  \ifnum \c@tocdepth >-2\relax
    \cftpartbreak
    \begingroup
      {
        \setlength{\memRTLleftskip}{0pt}
        \setlength{\memRTLrightskip}{0pt}
        \interlinepenalty\@M
        \centering
        \cftpartfont #1
        \par
      }
      \nobreak
        \global\@nobreaktrue
        \everypar{\global\@nobreakfalse\everypar{}}%
    \endgroup
  \fi}
\makeatother
\renewcommand{\cftpartfont}{\large\normalfont}

\let\oldfrontmatter\frontmatter
\renewcommand{\frontmatter}{\chapterstyle{frontmatter}\oldfrontmatter}
\let\oldmainmatter\mainmatter
\renewcommand{\mainmatter}{\chapterstyle{mainmatter}\oldmainmatter}
\let\oldbackmatter\backmatter
\renewcommand{\backmatter}{\chapterstyle{backmatter}\oldbackmatter}

\usepackage[linktoc=page]{hyperref}
\hypersetup{
colorlinks=true,
linkcolor=Red,
runcolor=Blue,
citecolor=RawSienna,
}

\usepackage[object=vectorian]{pgfornament}
\usepackage{xparse}
\usepackage{lipsum}

\usepackage{titling}

\nouppercaseheads
\makepagestyle{mystyle}
\makeevenhead{mystyle}{\bfseries\thepage}{}{\textbf{\color{purple}\thechapter}\,: \leftmark}
\makeoddhead{mystyle}{\textbf{\color{purple}\S}\,\rightmark}{}{\bfseries\thepage}
\makeevenfoot{mystyle}{}{}{}
\makeoddfoot{mystyle}{}{}{}
\makepsmarks{mystyle}{%
  \createmark{chapter}{left}{nonumber}{}{}}
\makeheadrule{mystyle}{\textwidth}{\normalrulethickness}
\pagestyle{mystyle}

\copypagestyle{chapter}{plain}
\makeoddfoot{chapter}{}{}{\rule[0cm]{0.8cm}{0.12cm}\\\thepage}

\copypagestyle{part}{plain}
\makeoddfoot{part}{}{}{\rule[0cm]{0.8cm}{0.12cm}\\\thepage}

%chapter formatting

%for description(subtitle)
\newcommand{\descrip}[1]{\def \thedescrip{#1}}


\NewDocumentCommand{\fncytitle}{s}{
    \begin{titlingpage}
        \topskip0pt
        \vspace*{10em}
        \begin{center}
            \hspace{1.5cm}{\pgfornament[scale=0.35, ydelta=-7pt, symmetry=v]{11} \em \Huge  \thetitle \ \pgfornament[scale=0.35, ydelta=-7pt]{11}}
            {\par \vspace*{1em}\hspace{20em} \emph{\thedescrip}  \large }
        \end{center}
        \vspace{14em}
        { 
        \begin{center}
           \hspace{1.5cm} {\bfseries \LARGE \theauthor}
        \end{center}
        }
        \vspace*{14em}
        { 
        \begin{center}  
            \hspace{1.5cm}{\bfseries \Large \thedate}    
        \end{center}
        }
    \end{titlingpage}
}

\setsecnumformat{\csname gablin#1\endcsname\quad}
\newcommand{\gablinsection}{{\color{purple}\S\thesection}}
\newcommand{\gablinsubsection}{{\color{purple}\S\thesubsection}}
\setsecnumdepth{subsection}

\renewcommand*{\thepart}{\color{purple}\arabic{part}}
\renewcommand*{\parttitlefont}{\color{black}\sffamily\HUGE}
\renewcommand*{\partnamefont}{\normalfont\Huge\scshape\MakeLowercase}
\renewcommand*{\partnumfont}{\color{black}\normalfont\scshape\MakeLowercase}


%some graph stuff
\usepackage[nameinlink]{cleveref}
\usepackage{todonotes}
\usepackage{tikz}
  \usetikzlibrary{arrows.meta,backgrounds}
\usepackage{pgfplots}
\pgfplotsset{width=7cm,compat=1.18}
\pgfplotsset{
    funcgraphbare/.style={
        axis x line=center,
        axis y line=center,
        ticks=none,
    },
    funcgraph/.style={
        funcgraphbare,
        xlabel={\(x\)},
        ylabel={\(y\)},
    },
}


\usepackage{physics}
\usepackage{mathdots}
\usepackage{tkz-euclide}
\usepackage{babel}
\usepackage{float}
\usepackage{caption}
\usepackage{paralist}
\usepackage{graphicx}
\usepackage{import}
\usepackage{xifthen}
\usepackage{pdfpages}
\usepackage{transparent}
\usepackage{framed}
\usepackage{siunitx}
\usepackage{pdfpages}
\usepackage{subcaption}
\usepackage{ellipsis}
\usepackage{nameref}
\usepackage{tzplot}

\raggedbottom
\newcommand{\incfig}[1]{%
    \def\svgwidth{\columnwidth}
    \scalebox{.5}{\import{../figures/}{#1.pdf_tex}}
}

\usepackage{epigraph}

\setlength\epigraphwidth{8cm}

\makeatletter
\patchcmd{\epigraph}{\@epitext{#1}}{\itshape\@epitext{#1}}{}{}
\makeatother

\usepackage{lettrine}

\usepackage{collectbox}

\makeatletter
\newcommand{\mybox}{%
    \collectbox{%
        \setlength{\fboxsep}{1pt}%
        \fbox{\BOXCONTENT}%
    }%
}
\makeatother

\usepackage{cleveref}


\crefformat{section}{\S#2#1#3} % see manual of cleveref, section 8.2.1
\crefformat{subsection}{\S#2#1#3}
\crefformat{subsubsection}{\S#2#1#3}

