\usepackage{amsmath, amssymb}

\nonzeroparskip
\usepackage[right=8.5cm,left=2.5cm,bottom=1cm,top=1cm,marginparwidth=6cm,marginparsep=0.7cm,includeheadfoot,asymmetric]{geometry}

\usepackage[texindy]{imakeidx}
\makeindex[intoc]


\usepackage[dvipsnames]{xcolor}

\usepackage{etoolbox}

\usepackage{booktabs, tabularx}
\setlength{\parindent}{0em}

\usepackage{dsfont}

%Chapter Style
\usepackage{calc}
%chapter style

\makeatletter
\def\@makechapterhead#1{%
  \vspace*{2\p@}%
  {\parindent \z@ \raggedleft \reset@font
            \scshape \@chapapp{} \thechapter
        \par\nobreak
        \interlinepenalty\@M
    \Huge \bfseries #1\par\nobreak
    %\vspace*{1\p@}%
    \hrulefill
    \par\nobreak
    \vskip 10\p@
  }}
\def\@makeschapterhead#1{%
  \vspace*{2\p@}%
  {\parindent \z@ \raggedleft \reset@font
            \scshape \vphantom{\@chapapp{} \thechapter}
        \par\nobreak
        \interlinepenalty\@M
    \Huge \bfseries #1\par\nobreak
    %\vspace*{1\p@}%
    \par\nobreak
    \vskip 10\p@
  }}

\usepackage{xparse}
\usepackage{lipsum}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%page style

\nouppercaseheads
\makepagestyle{mystyle}
\makeevenhead{mystyle}{{\emph{\thechapter.\,\leftmark}}}{\hspace*{49.5em} \sffamily\thepage}{}
\makeoddhead{mystyle}{\emph{\rightmark}}{\hspace*{49.5em} \sffamily\thepage}{}

\makeevenfoot{mystyle}{}{}{}
\makeoddfoot{mystyle}{}{}{}
\makepsmarks{mystyle}{%
  \createmark{chapter}{left}{nonumber}{}{}}
  \setlength{\headwidth}{\textwidth}
  \makeheadrule{mystyle}{\headwidth}{\normalrulethickness}
\addtolength{\headwidth}{\marginparwidth}
\addtolength{\headwidth}{\marginparsep}
 \nouppercaseheads 

\pagestyle{mystyle}

\copypagestyle{chapter}{plain}
\makeoddfoot{chapter}{}{}{\rule[0cm]{0.8cm}{0.12cm}\\\emph{\thepage}}

\copypagestyle{part}{plain}
\makeoddfoot{part}{}{}{\rule[0cm]{0.8cm}{0.12cm}\\\emph{\thepage}}


%some graph stuff
\usepackage{todonotes}
\usepackage{tikz}
\usetikzlibrary{mindmap}
  \usetikzlibrary{arrows.meta,backgrounds}
  \usetikzlibrary{decorations.pathmorphing,patterns}
\usepackage{pgfplots}
\pgfplotsset{width=7cm,compat=1.18}
\pgfplotsset{
    funcgraphbare/.style={
        axis x line=center,
        axis y line=center,
        ticks=none,
    },
    funcgraph/.style={
        funcgraphbare,
        xlabel={\(x\)},
        ylabel={\(y\)},
    },
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%packages
\usepackage{physics}
\usepackage{tkz-euclide}

\usepackage{babel}
\usepackage{mhchem}
\usepackage[cleanlook,british]{isodate}% day-first date
\usepackage{caption}
\usepackage{paralist}
\usepackage{graphicx}
\usepackage{microtype}
\usepackage{wrapfig}
\usepackage{import}
\usepackage{xifthen}


\usepackage[per-mode=symbol]{siunitx}
\usepackage{bohr}
\usepackage{modiagram}
\usepackage{subcaption}


\usepackage{nameref}
\usepackage{tzplot}
\usepackage{enumitem}
\newlist{axioms}{enumerate}{10}
\setlist[axioms]{label=\textbf{A\arabic*.},ref=Axiom\arabic*,leftmargin=*}

\newlist{casework}{enumerate}{10}
\setlist[casework]{label=\textbf{Case\,\Roman*},ref=Axiom\arabic*,leftmargin=*}


\usepackage{ragged2e}
\usepackage{empheq}

\usepackage[linktoc=page,hyperfootnotes=false]{hyperref}
\hypersetup{
colorlinks=true,
linkcolor=TealBlue!70!black,
citecolor=TealBlue!70!black,
urlcolor=TealBlue!70!black,
}
\usepackage[nameinlink]{cleveref}
\usepackage{float}


\usepackage[citestyle=alphabetic]{biblatex}

\usepackage{listings}
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}


\usetikzlibrary{decorations.markings}
\tikzset{
    arrow inside/.style = {
        postaction = {
            decorate,
            decoration={
                markings,
                mark=at position #1 with {\arrow{>}}
            }
        }
    },
    arrow inside/.default = 0.5
}

\raggedbottom
\newcommand{\incfig}[1]{%
    \def\svgwidth{\columnwidth}
    \scalebox{.5}{\import{../figures/}{#1.pdf_tex}}
}

\usepackage{epigraph}

\setlength\epigraphwidth{8cm}

\makeatletter
\patchcmd{\epigraph}{\@epitext{#1}}{\itshape\@epitext{#1}}{}{}
\makeatother

\usepackage{collectbox}

\makeatletter
\newcommand{\mybox}{%
    \collectbox{%
        \setlength{\fboxsep}{1pt}%
        \fbox{\BOXCONTENT}%
    }%
}
\makeatother

\usepackage{cleveref}


\crefformat{section}{\S#2#1#3} % see manual of cleveref, section 8.2.1
\crefformat{subsection}{\S#2#1#3}
\crefformat{subsubsection}{\S#2#1#3}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%section, part formatting

\renewcommand*{\thepart}{\color{black}\Alph{part}}
\renewcommand*{\parttitlefont}{\color{black}\normalfont\bfseries\HUGE}
\renewcommand*{\partnamefont}{\normalfont\LARGE\itshape}
\renewcommand*{\partnumfont}{\color{black}\normalfont\itshape}

\setsechook{\hangsecnum}

\makeatletter

\renewcommand{\hangsecnum}{%
  \def\@seccntformat##1{%
    \makebox[0pt][r]{%
      \color{black} 
      {%
      \csname the##1\endcsname
      }
      \, 
    }%
  }%
}

\setsecnumdepth{subsection}

\setsubsechook{\hangsecnum}
\setsubsubsechook{\hangsecnum}


\makeatletter                   
\def\printauthor{%                  
    {\large \@author}}          
\makeatother

\usepackage{fontawesome5}

\makeatletter
\newcommand{\github}[1]{%
   \href{#1}{\textcolor{black}{\faGithub}}%
}
\makeatother

\usepackage{authblk}

\author{
    \github{https://github.com/Anonscholar} Adyansh Mishra
}

\newcommand*{\email}[1]{%
    \normalsize\href{mailto:#1}{#1}\par
    }

\affil{\email{adyanshmishra@proton.me}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%title page

\newcommand*{\titleSW}{\begin{titlingpage}
\newgeometry{left=10cm}
\begingroup% Story of Writing
\raggedleft
\vspace*{\baselineskip}
{\HUGE\itshape \thetitle}\\[\baselineskip]
\vspace{3em}
{\printauthor}
\vfill
\vspace*{\baselineskip}
\endgroup
\restoregeometry
\end{titlingpage}}

\usepackage{ellipsis}

\usetikzlibrary{patterns,decorations.pathmorphing}
\usetikzlibrary{arrows.meta}
\tikzset{>=latex}

\usepackage{framed}
% colors to be used
\definecolor{myred}{RGB}{127,0,0}
\definecolor{myyellow}{RGB}{169,121,69}

% a modification of the leftbar environment defined by the framed package
% will be used to place a vertical colored bar separating the page number and the
% title in chapter entries
\renewenvironment{leftbar}{%
  \def\FrameCommand{\textcolor{myyellow}{\vrule width 1.4pt depth 5pt}\hspace*{15pt}}%
  \MakeFramed{\advance\hsize-\width\FrameRestore}}%
 {\endMakeFramed}

% redefinition of the name of the ToC
\makeatletter
% redefinitions for chapter entries

% redefinitions for part entries
\renewcommand{\partnumberline}[1]{\mbox{\centering\normalfont\itshape\rmfamily Part\thepart~#1}\par\noindent\Large}
\renewcommand\cftpartafterpnum{\vskip1ex}

\makeatletter
\renewcommand*{\l@part}[2]{%
  \ifnum \c@tocdepth >-2\relax
    \cftpartbreak
    \begingroup
      {
        \setlength{\memRTLleftskip}{0pt}
        \setlength{\memRTLrightskip}{0pt}
        \interlinepenalty\@M
        \centering
        \cftpartfont #1
        \par
      }
      \nobreak
        \global\@nobreaktrue
        \everypar{\global\@nobreakfalse\everypar{}}%
    \endgroup
  \fi}
\makeatother
\renewcommand{\cftpartfont}{\bfseries}

% redefinitions for section entries
\renewcommand\cftsectionfont{\rmfamily}
\renewcommand\cftsectionpagefont{\rmfamily\itshape\color{myred}}

\cftsetindents{section}{1em}{2em}


% text styling of all side footnotes
% styling and placement of mark
\footmarkstyle{{\itshape\large#1. }}
\setlength{\footmarkwidth}{0em}
\setlength{\footmarksep}{-\footmarkwidth}
% memoir command - do all footnotes in margin
\footnotesinmargin

% SIDECAPTIONS
\setsidecaps{\marginparsep}{\marginparwidth}
\sidecapmargin{outer}
\setsidecappos{t}
\renewcommand*{\sidecapstyle}{%
\captionnamefont{\scshape}
\ifscapmargleft
\captionstyle{\RaggedLeft\footnotesize\foottextfont}%
\else
\captionstyle{\RaggedRight\footnotesize\foottextfont}%
\fi}

 \makeatletter
  \renewcommand{\fnum@figure}{
  {\large\scshape\figurename~\thefigure}}
\makeatother
\renewcommand{\footnotesize}{\fontsize{10pt}{12pt}\selectfont} % Change footnotesize to 10pt


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{minitoc}     % For generating chapter-local TOCs

% Initialize the minitoc package
\dominitoc[n]
\setcounter{minitocdepth}{1}   % Show until sections in minitoc
\nomtcrule    % removes rules = horizontal lines  Define the command to create a local TOC in the margin without subsections

\undottedmtctrue

\newcommand{\margintoc}{
  \marginnote{
    \vspace{-10em}
    \begin{minipage}[t]{7.5cm}
      {\minitoc} % This will use the depth set previously in \dominitoc
    \end{minipage}
  }
}